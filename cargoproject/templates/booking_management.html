{% extends "base.html" %}
{% block content %}

<h1 class="page-title">Booking Management</h1>

<div class="neon-box">

<table style="width:100%; color:white; border-collapse: collapse;">
    <tr style="background:#111;">
        <th>ID</th>
        <th>Flight</th>
        <th>Weights</th>
        <th>Price/kg</th>
        <th>Total</th>
        <th>Status</th>
        <th>Action</th>
    </tr>

{% for b in bookings %}
<tr style="text-align:center; border-bottom:1px solid #333;">
    <td>{{ b['id'] }}</td>
    <td>{{ b['flight_id'] }}</td>

    <td>
        Actual: {{ b['actual_weight'] or 0 }} kg<br>
        Volumetric: {{ (b['volumetric_weight'] or 0)|round(2) }} kg<br>
        Charged: <b>{{ (b['chargeable_weight'] or 0)|round(2) }} kg</b>
    </td>

    <td>₹{{ b['price'] }}</td>
    <td><b>₹{{ (b['total'] or 0)|round(2) }}</b></td>

    <td>{{ b['status'] }}</td>

    <td>

        <!-- ⭐ CHAT BUTTON ADDED HERE -->
        <a href="/chat/{{ b['id'] }}" class="neon-btn" style="margin-bottom:5px;">Chat</a>
        <br>

        {% if b['status'] == "CONFIRMED" %}
            <a href="/download_invoice/{{ b['id'] }}" class="neon-btn">Invoice</a>

        {% elif b['status'] == "HOLD" %}
            <form method="POST" action="/confirm_booking">
                <input type="hidden" name="id" value="{{ b['id'] }}">
                <button class="neon-btn">Confirm</button>
            </form>

        {% else %}
            Cancelled
        {% endif %}
    </td>
</tr>
{% endfor %}
</table>

</div>

{% endblock %}
